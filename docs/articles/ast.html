<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <title>(UNFINISHED) Auto Convert Go to Dart with an Abstract Syntax Tree</title>

    
    <!-- Begin scripts/articles/*-header.html: Article Header for Custom Markdown files processed by rustdoc, like chip8.md -->
<meta property="og:title" 
    content="(UNFINISHED) Auto Convert Go to Dart with an Abstract Syntax Tree" 
    data-rh="true">
<meta property="og:description" 
    content="(UNFINISHED) How we convert Go code to Dart and Flutter automatically with an Abstract Syntax Tree" 
    data-rh="true">
<meta property="og:image" 
    content="https://lupyuen.github.io/images/bloc-ios.jpg">
<meta property="og:type" 
    content="article" data-rh="true">
<!-- End scripts/articles/*-header.html -->
<!-- Begin scripts/rustdoc-header.html: Header for Custom Markdown files processed by rustdoc, like chip8.md -->
<link rel="alternate" type="application/rss+xml" title="RSS Feed for lupyuen" href="/rss.xml" />
<link rel="stylesheet" type="text/css" href="../normalize.css">
<link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle">
<link rel="stylesheet" type="text/css" href="../dark.css">
<link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle">
<link rel="stylesheet" type="text/css" href="../prism.css">
<script src="../storage.js"></script><noscript>
<link rel="stylesheet" href="../noscript.css"></noscript>
<link rel="shortcut icon" href="../favicon.ico">
<style type="text/css">
    #crate-search {
        background-image: url("../down-arrow.svg");
    }
    a {
        color: #77d;
    }
</style>
<!-- End scripts/rustdoc-header.html -->


</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

        <!-- Begin scripts/rustdoc-before.html: Pre-HTML for Custom Markdown files processed by rustdoc, like chip8.md -->

    <!-- Begin Theme Picker -->
    <div class="theme-picker" style="left: 0"><button id="theme-picker" aria-label="Pick another theme!"><img src="../brush.svg"
        width="18" alt="Pick another theme!"></button>
        <div id="theme-choices"></div>
    </div>
    <script src="../theme.js"></script>
    <script src="../prism.js"></script>
    <!-- Theme Picker -->

    <!-- End scripts/rustdoc-before.html -->
    

    <h1 class="title">(UNFINISHED) Auto Convert Go to Dart with an Abstract Syntax Tree</h1>
    <nav id="TOC"><ul>
<li><a href="#manual-conversion-from-go-to-dart-gets-really-tiring">1 Manual Conversion From Go To Dart Gets Really Tiring</a><ul></ul></li>
<li><a href="#whats-an-abstract-syntax-tree">2 What's an Abstract Syntax Tree?</a><ul></ul></li>
<li><a href="#generate-an-abstract-syntax-tree">3 Generate an Abstract Syntax Tree</a><ul></ul></li>
<li><a href="#walk-the-abstract-syntax-tree">4 Walk the Abstract Syntax Tree</a><ul></ul></li>
<li><a href="#auto-convert-go-type-to-dart">5 Auto Convert Go Type to Dart</a><ul></ul></li>
<li><a href="#auto-convert-go-field-to-dart">6 Auto Convert Go Field to Dart</a><ul>
<li><a href="#field-name">6.1 Field Name</a><ul></ul></li>
<li><a href="#field-type">6.2 Field Type</a><ul></ul></li>
<li><a href="#field-tag">6.3 Field Tag</a><ul></ul></li></ul></li>
<li><a href="#auto-convert-go-struct-to-dart">7 Auto Convert Go Struct to Dart</a><ul></ul></li>
<li><a href="#auto-generate-cbor-encoder">8 Auto Generate CBOR Encoder</a><ul></ul></li>
<li><a href="#auto-convert-go-function-to-dart">9 Auto Convert Go Function to Dart</a><ul></ul></li>
<li><a href="#test-auto-conversion">10 Test Auto Conversion</a><ul></ul></li>
<li><a href="#why-auto-convert-go-to-dart">11 Why Auto Convert Go to Dart?</a><ul></ul></li>
<li><a href="#whats-next">12 What's Next</a><ul></ul></li>
<li><a href="#further-reading">13 Further Reading</a><ul></ul></li></ul></nav><p><img src="https://lupyuen.github.io/images/bloc-ios.jpg" alt="Work-in-progress PineTime Companion App on iPhone, converted from Go to Flutter and Dart" /></p>
<p><em>Work-in-progress PineTime Companion App on iPhone, converted from Go to Flutter and Dart</em></p>
    <p>üìù <em>9 Jul 2020</em></p>

<p><strong>NOTE: THIS ARTICLE IS UNFINISHED</strong></p>
<p>We're now building with <a href="https://flutter.dev/"><strong>Flutter</strong></a> the open source <strong><a href="https://github.com/lupyuen/pinetime-companion">Android and iOS Companion App</a></strong> for <strong><a href="https://lupyuen.github.io/pinetime-rust-mynewt/articles/pinetime">PineTime Smart Watch</a></strong>: For updating firmware, syncing date/time, pushing mobile notifications, controlling our smart home gadgets, ... and so much more!</p>
<p>There's a problem: The code to do all this is available in Go... But Flutter runs on another language: Dart!</p>
<p>Today we shall experiment with <strong>converting Go code to Dart automatically.</strong> The conversion may not be perfect, but it will be very helpful for building the PineTime Companion App!</p>
<p>Read on to learn how this Go code: <a href="https://github.com/lupyuen/mynewt-newtmgr/blob/master/nmxact/nmp/image.go"><code>nmxact/nmp/image.go</code></a></p>
<pre><code class="language-go">//  Convert From Go...
//  Go Struct
type ImageUploadReq struct {
  NmpBase  `codec:&quot;-&quot;`
  ImageNum uint8  `codec:&quot;image&quot;`
  Off      uint32 `codec:&quot;off&quot;`
  Len      uint32 `codec:&quot;len,omitempty&quot;`
  DataSha  []byte `codec:&quot;sha,omitempty&quot;`
  Upgrade  bool   `codec:&quot;upgrade,omitempty&quot;`
  Data     []byte `codec:&quot;data&quot;`
}

//  Go Function
func NewImageUploadReq() *ImageUploadReq {
  r := &amp;ImageUploadReq{}
  fillNmpReq(r, NMP_OP_WRITE, NMP_GROUP_IMAGE, NMP_ID_IMAGE_UPLOAD)
  return r
}
</code></pre>
<p>Was automatically converted to this Dart code: <a href="https://github.com/lupyuen/mynewt-newtmgr/blob/ast/dart/nmp/image.dart"><code>dart/nmp/image.dart</code></a></p>
<pre><code class="language-dart">//  Converted To Dart...
//  Converted Dart Class
class ImageUploadReq 
  with NmpBase       //  Get and set SMP Message Header
  implements NmpReq  //  SMP Request Message
{
  int ImageNum; //  image: uint8
  int Off;      //  off: uint32
  int Len;      //  len: uint32
  typed.Uint8Buffer DataSha;  //  sha: []byte
  bool Upgrade;               //  upgrade: bool
  typed.Uint8Buffer Data;     //  data: []byte

  NmpMsg Msg() { return MsgFromReq(this); }

  /// Encode the SMP Request fields to CBOR
  void Encode(cbor.MapBuilder builder) {
    builder.writeString(&quot;image&quot;);
    builder.writeInt(ImageNum); // uint8
    //  ...Omitted...
    builder.writeString(&quot;data&quot;);
    builder.writeArray(Data);   // []byte
  }
}

//  Converted Dart Function
ImageUploadReq NewImageUploadReq() {
  var r = ImageUploadReq();
  fillNmpReq(r, NMP_OP_WRITE, NMP_GROUP_IMAGE, NMP_ID_IMAGE_UPLOAD);
  return r;
}
</code></pre>
<h1 id="manual-conversion-from-go-to-dart-gets-really-tiring" class="section-header"><a href="#manual-conversion-from-go-to-dart-gets-really-tiring">1 Manual Conversion From Go To Dart Gets Really Tiring</a></h1>
<p>Earlier we attempted a manual code conversion from Go to Dart...</p>
<p><em><a href="https://lupyuen.github.io/pinetime-rust-mynewt/articles/companion">&quot;Convert Go to Flutter and Dart for PineTime Companion App&quot;</a></em></p>
<p>But it became really tedious and mechanical...</p>
<ol>
<li>
<p>Add a Semicolon (<code>;</code>) to every line</p>
</li>
<li>
<p>Flip the Names and Types, so this Go code...</p>
<pre><code class="language-go">//  In Go...
Len uint32
</code></pre>
<p>Becomes this code in Dart...</p>
<pre><code class="language-dart">//  In Dart...
int Len;
</code></pre>
</li>
<li>
<p>Flip all Functions from this...</p>
<pre><code class="language-go">//  In Go...
func NewImageUploadReq() *ImageUploadReq { ...
</code></pre>
<p>To this...</p>
<pre><code class="language-dart">//  In Dart...
ImageUploadReq NewImageUploadReq() { ...
</code></pre>
</li>
<li>
<p>It's easy to encode Go Structs into <a href="https://en.wikipedia.org/wiki/CBOR">CBOR</a>...</p>
<pre><code class="language-go">//  In Go...
type ImageUploadReq struct {
  //  Struct Field &quot;Len&quot; will be encoded as key &quot;len&quot; in CBOR
  Len uint32 `codec:&quot;len,omitempty&quot;`
</code></pre>
<p>But encoding a Dart Class into CBOR is cumbersome and error-prone...</p>
<pre><code class="language-dart">//  In Dart...
class ImageUploadReq  {
  int Len;
  ...
  void Encode(cbor.MapBuilder builder) {
    //  Class Field &quot;Len&quot; will be encoded as key &quot;len&quot; in CBOR
    builder.writeString(&quot;len&quot;);
    builder.writeInt(Len);
</code></pre>
</li>
</ol>
<p><em>Surely a computer can do this tedious and mechanical conversion from Go to Dart?</em></p>
<p>Yes it can, with an <strong>Abstract Syntax Tree</strong>!</p>
<h1 id="whats-an-abstract-syntax-tree" class="section-header"><a href="#whats-an-abstract-syntax-tree">2 What's an Abstract Syntax Tree?</a></h1>
<p><em>Have you ever wondered... Why do we speak the way we speak?</em></p>
<p><em>Why is this ok...</em></p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
    <span class="ident">I</span> <span class="ident">EAT</span> <span class="ident">RICE</span></pre></div>
<p><em>But not this?</em></p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
    <span class="ident">I</span> <span class="ident">RICE</span></pre></div>
<p>Because there's a structure in everything that we say...</p>
<p><img src="https://lupyuen.github.io/images/ast-tree2.jpg" alt="Syntax Tree for a sentence" /></p>
<p>We call this tree-like structure the <strong>Syntax Tree</strong> (though it looks more like a flying broomstick)</p>
<p><em>What's a Syntax Tree good for?</em></p>
<p>A Syntax Tree is useful for translating languages. To translate <code>I EAT RICE</code> to Chinese, we take each chunk of the tree (&quot;subtree&quot;) and translate each chunk to Chinese...</p>
<p><img src="https://lupyuen.github.io/images/ast-tree.jpg" alt="Translating the Syntax Tree for a sentence" /></p>
<p><em>Does this work for translating Programming Languages like Go and Dart?</em></p>
<p>Yes! Our Go program may also be structured as a Syntax Tree...</p>
<p><img src="https://lupyuen.github.io/images/ast-go.png" alt="Syntax Tree for a Go Struct" /></p>
<p>And we may translate the Syntax Tree to Dart the same way, subtree by subtree.</p>
<p><em>Why not just translate word by word?</em></p>
<p>Because the Surrounding Context matters!</p>
<p>If we don't look at the surrounding text, translating <code>I EAT RICE</code> word for word produces this hilarious result...</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
    <span class="ident">ÊàëÂêÉÁ±≥</span></pre></div>
<p>Which sounds really weird because it means...</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
    <span class="ident">I</span> <span class="ident">EAT</span> <span class="ident">UNCOOKED</span> <span class="ident">RICE</span></pre></div>
<p><em>(Unless we really meant to say &quot;ËÄÅÈº†ÂêÉÂ§ßÁ±≥&quot;)</em></p>
<p>Let's find out how to generate a Syntax Tree automatically for our Go code.</p>
<h1 id="generate-an-abstract-syntax-tree" class="section-header"><a href="#generate-an-abstract-syntax-tree">3 Generate an Abstract Syntax Tree</a></h1>
<p>Go provides the <a href="https://golang.org/pkg/go/ast/"><code>ast</code> library</a> for parsing Go code into an Abstract Syntax Tree.</p>
<p>Here's how we call <code>ast</code> to generate an Abstract Syntax Tree for a block of Go code: <a href="https://github.com/lupyuen/mynewt-newtmgr/blob/ast/dart/convert.go#L76-L103"><code>dart/convert.go</code></a></p>
<pre><code class="language-go">import (
  &quot;go/ast&quot;
  &quot;go/format&quot;
  &quot;go/parser&quot;
  &quot;go/token&quot;
)

// Inspect the Abstract Syntax Tree of our Go code and convert to Dart
func convertGoToDart() {
  // Create the Abstract Syntax Tree by parsing the Go code in &quot;src&quot;
  fileset := token.NewFileSet() // Positions are relative to fileset
  // Change &quot;src&quot; to &quot;nil&quot; to parse the file &quot;src.go&quot; instead of the string
  node, err := parser.ParseFile(fileset, &quot;src.go&quot;, src, 0)
  if err != nil {
    panic(err)
  }
  ...
}
</code></pre>
<p><code>src</code> is a string that contains our Go source code (that will be converted to Dart): <a href="https://github.com/lupyuen/mynewt-newtmgr/blob/ast/dart/convert.go#L16-L35"><code>dart/convert.go</code></a>...</p>
<pre><code class="language-go">// Go code to be converted to Dart. &quot;package&quot; is mandatory. &quot;bt&quot; means backtick &quot;`&quot;
const src = `
package main

type ImageUploadReq struct {
  NmpBase  ` + bt + `codec:&quot;-&quot;` + bt + `
  ImageNum uint8  ` + bt + `codec:&quot;image&quot;` + bt + `
  Off      uint32 ` + bt + `codec:&quot;off&quot;` + bt + `
  // ...Omitted...
}

func NewImageUploadReq() *ImageUploadReq {
  r := &amp;ImageUploadReq{}
  fillNmpReq(r, NMP_OP_WRITE, NMP_GROUP_IMAGE, NMP_ID_IMAGE_UPLOAD)
  return r
}
`
</code></pre>
<p>The <code>ParseFile()</code> method above parses the Go code in <code>src</code> and returns the Abstract Syntax Tree in <code>node</code>...</p>
<pre><code class="language-go">node, err := parser.ParseFile(fileset, &quot;src.go&quot;, src, 0)
</code></pre>
<p>We'll inspect <code>node</code> in the next section.</p>
<p><em>Why did we call <code>NewFileSet()</code>?</em></p>
<pre><code class="language-go">fileset := token.NewFileSet()
</code></pre>
<p>This creates a <a href="https://golang.org/pkg/go/token/#FileSet"><code>FileSet</code> object</a> that tracks the filename, line number and column number of our Go code in the Abstract Syntax Tree.</p>
<p><code>FileSet</code> is useful for flagging the Go code that fails with our automatic conversion.</p>
<p><img src="https://lupyuen.github.io/images/ast-go2.png" alt="Walking the Abstract Syntax Tree" /></p>
<h1 id="walk-the-abstract-syntax-tree" class="section-header"><a href="#walk-the-abstract-syntax-tree">4 Walk the Abstract Syntax Tree</a></h1>
<p>Now that we have the Abstract Syntax Tree in <code>node</code>, let's <a href="https://en.wikipedia.org/wiki/Tree_traversal">walk the tree!</a></p>
<p><em>(Caution: Never walk under a Durian Tree!)</em></p>
<p>Here's how we walk an Abstract Syntax Tree and convert each chunk of Go code in the tree: <a href="https://github.com/lupyuen/mynewt-newtmgr/blob/ast/dart/convert.go#L76-L103"><code>dart/convert.go</code></a></p>
<pre><code class="language-go">// Inspect the Abstract Syntax Tree of our Go code and convert to Dart
func convertGoToDart() {
  // Omitted: Create the Abstract Syntax Tree in &quot;node&quot; by parsing Go code
  ...
  // Convert all Go Struct and Function Declarations in &quot;node&quot;
  for _, decl := range node.Decls {
    // What kind of subtree is this?
    switch decl := decl.(type) {

    // If it's a Generic Declaration...
    case *ast.GenDecl:
      // Convert the Go Struct to Dart
      convertStruct(fileset, decl)

    // If it's a Function Declaration...
    case *ast.FuncDecl:
      // Convert the Go Function to Dart
      convertFunction(fileset, decl)

    // Not sure!
    default:
      // Flag the code location using the fileset
      fmt.Println(&quot;*** Unknown Decl:&quot;)
      ast.Print(fileset, decl)
    }
  }
}
</code></pre>
<p>Let's study the code above. Recall that <code>node</code> contains a Go Struct and a Go Function...</p>
<pre><code class="language-go">//  Go Struct parsed as Generic Declaration (GenDecl)
type ImageUploadReq struct { ... }

//  Go Function parsed as Function Declaration (FuncDecl)
func NewImageUploadReq() *ImageUploadReq { ... }
</code></pre>
<p>The <code>ast</code> library parses both as <strong>Declarations</strong>...</p>
<ol>
<li>
<p><strong>Generic Declaration (<code>GenDecl</code>)</strong>: Declaration for a Go Struct</p>
</li>
<li>
<p><strong>Function Declaration (<code>FuncDecl</code>)</strong>: Declaration for a Go Function</p>
</li>
</ol>
<p>Declarations are parked under the <code>Decls</code> property of our <code>node</code>. </p>
<p>Hence we convert Go Structs and Functions by iterating over all <code>Decls</code> like so...</p>
<pre><code class="language-go">// &quot;Decls&quot; contains all Go Struct and Function Declarations in &quot;node&quot;
for _, decl := range node.Decls { ...
</code></pre>
<p>Next we inspect the type of the Declaration in <code>decl</code>...</p>
<pre><code class="language-go">// What kind of subtree is this?
switch decl := decl.(type) {

// If it's a Generic Declaration...
case *ast.GenDecl:
  // Convert the Go Struct to Dart
  convertStruct(fileset, decl)

// If it's a Function Declaration...
case *ast.FuncDecl:
  // Convert the Go Function to Dart
  convertFunction(fileset, decl)
</code></pre>
<p>Then we call...</p>
<ol>
<li>
<p><strong><code>convertStruct()</code></strong> to convert a Go Struct (parsed as <code>GenDecl</code>)</p>
</li>
<li>
<p><strong><code>convertFunction()</code></strong> to convert a Go Function (parsed as <code>FuncDecl</code>)</p>
</li>
</ol>
<p>We'll see <code>convertStruct()</code> and <code>convertFunction()</code> in a while. First let's learn how Go types are converted to Dart.</p>
<h1 id="auto-convert-go-type-to-dart" class="section-header"><a href="#auto-convert-go-type-to-dart">5 Auto Convert Go Type to Dart</a></h1>
<p>Now we'll map Go Types to Dart Types, which is needed for converting Go Structs and Functions. </p>
<p>Go has specific numeric types like <code>uint8</code> (unsigned 8-bit integer), but Dart only has a single integer type: <code>int</code>. Here's how we map the types...</p>
<table><thead><tr><th align="left">Go Type</th><th align="left">Dart Type</th><th align="left">CBOR Type</th></tr></thead><tbody>
<tr><td align="left"><code>bool</code></td><td align="left"><code>bool</code></td><td align="left"><code>Bool</code></td></tr>
<tr><td align="left"><code>uint8</code></td><td align="left"><code>int</code></td><td align="left"><code>Int</code></td></tr>
<tr><td align="left"><code>uint16</code></td><td align="left"><code>int</code></td><td align="left"><code>Int</code></td></tr>
<tr><td align="left"><code>uint32</code></td><td align="left"><code>int</code></td><td align="left"><code>Int</code></td></tr>
<tr><td align="left"><code>[]byte</code></td><td align="left"><code>typed.Uint8Buffer</code></td><td align="left"><code>Array</code></td></tr>
</tbody></table>
<p>We use <code>Uint8Buffer</code> from the <a href="https://pub.dev/packages/typed_data"><code>typed_data</code> Dart Library</a> to represent byte buffers (like Bluetooth messages).</p>
<p><em>What's the CBOR Type?</em></p>
<p>Our PineTime Smart Watch firmware exposes the <a href="https://github.com/apache/mynewt-mcumgr">Simple Management Protocol</a> over Bluetooth LE. The protocol supports a <a href="https://github.com/apache/mynewt-mcumgr/tree/master/cmd">rich set of commands</a> for updating PineTime firmware, accessing the PineTime Flash filesystem, debug logs, runtime statistics, ...</p>
<p>The Simple Management Protocol uses <a href="https://en.wikipedia.org/wiki/CBOR">CBOR</a> to encode the Bluetooth LE messages. (Think of CBOR as a compact, binary form of JSON)</p>
<p>Thus each Go Type also needs to be converted as a CBOR Type. We'll be encoding CBOR messages with the <a href="https://pub.dev/packages/cbor"><code>cbor</code> Dart Library</a>.</p>
<p>Here is the code that converts a Go Type to Dart and CBOR: <a href="https://github.com/lupyuen/mynewt-newtmgr/blob/ast/dart/convert.go#L265-L281"><code>dart/convert.go</code></a></p>
<pre><code class="language-go">// Convert a Go type to Dart type and CBOR type
func convertType(typeName string) (string, string) {
  switch typeName {
  case &quot;bool&quot;:
    return &quot;bool&quot;, &quot;Bool&quot;
  case &quot;uint8&quot;:
    return &quot;int&quot;, &quot;Int&quot;
  case &quot;uint16&quot;:
    return &quot;int&quot;, &quot;Int&quot;
  case &quot;uint32&quot;:
    return &quot;int&quot;, &quot;Int&quot;
  case &quot;[]byte&quot;:
    return &quot;typed.Uint8Buffer&quot;, &quot;Array&quot;
  default:
    return &quot;UNKNOWN&quot;, &quot;UNKNOWN&quot;
  }
}
</code></pre>
<p>For convenience, we create a <code>DartField</code> Struct that stores the converted types: <a href="https://github.com/lupyuen/mynewt-newtmgr/blob/ast/dart/convert.go#L204-L211"><code>dart/convert.go</code></a></p>
<pre><code class="language-go">// DartField represents a Go Struct Field converted to Dart and CBOR
type DartField struct {
  Name     string // e.g. &quot;Len&quot;
  CborName string // e.g. &quot;len&quot;
  GoType   string // e.g. &quot;uint32&quot;
  DartType string // e.g. &quot;int&quot;
  CborType string // e.g. &quot;Int&quot;
}
</code></pre>
<p>We'll use <code>DartField</code> in the next section.</p>
<h1 id="auto-convert-go-field-to-dart" class="section-header"><a href="#auto-convert-go-field-to-dart">6 Auto Convert Go Field to Dart</a></h1>
<p>Now that we have the function <code>convertType()</code> that converts a Go Type to Dart and CBOR, let's call it to convert each field of a Go Struct: <a href="https://github.com/lupyuen/mynewt-newtmgr/blob/ast/dart/convert.go#L241-L263"><code>dart/convert.go</code></a></p>
<pre><code class="language-go">// Convert a Go Struct Field astField to Dart
func convertField(fileset *token.FileSet, astField *ast.Field) DartField {
  // Create a new DartField
  dartField := DartField{}
</code></pre>
<p>Function <code>convertField()</code> takes a Go Struct Field like <code>Len</code>...</p>
<pre><code class="language-go">//  In Go...
type ImageUploadReq struct {
  //  Go Struct Field &quot;Len&quot; will be converted to Dart and CBOR
  Len uint32 `codec:&quot;len,omitempty&quot;`
</code></pre>
<p>And returns a <code>DartField</code> like so...</p>
<pre><code class="language-dart">// In Dart: When we convert the above &quot;Len&quot; field from Go to Dart...
type DartField struct {
  Name     string // Contains &quot;Len&quot;
  CborName string // Conatins &quot;len&quot;
  GoType   string // Contains &quot;uint32&quot;
  DartType string // Contains &quot;int&quot;
  CborType string // Contains &quot;Int&quot;
}
</code></pre>
<p>The <code>ast</code> library parses each field of our Go Struct as an <code>ast.Field</code>...</p>
<p><img src="https://lupyuen.github.io/images/ast-go3.png" alt="Go Struct Field parsed as ast.Field" /></p>
<p>Let's convert each component of <code>ast.Field</code>...</p>
<ol>
<li>
<p><code>Names</code>: Name of the Struct Field</p>
</li>
<li>
<p><code>Type</code>: Type of the Struct Field</p>
</li>
<li>
<p><code>Tag</code>: Field Tag, which includes the CBOR Name</p>
</li>
</ol>
<h2 id="field-name" class="section-header"><a href="#field-name">6.1 Field Name</a></h2>
<p>First step of the Field Conversion: Copy the Field Name from <code>ast.Field.Names</code> to <code>DartField</code> (if it has one): <a href="https://github.com/lupyuen/mynewt-newtmgr/blob/ast/dart/convert.go#L241-L263"><code>dart/convert.go</code></a></p>
<pre><code class="language-go">// Convert the Go Struct Field &quot;astField&quot; to Dart
func convertField(fileset *token.FileSet, astField *ast.Field) DartField {
  ...
  // If this field has a name...
  if len(astField.Names) &gt; 0 {
    // Set the name
    dartField.Name = astField.Names[0].Name // e.g. &quot;Len&quot;
  }
</code></pre>
<p><em>Why did we specify <code>Names[0]</code>?</em></p>
<p>Because each row of the Struct Declaration can have <a href="https://www.golang-book.com/books/intro/9">multiple names</a>...</p>
<pre><code class="language-go">type Circle struct {
  x, y, r float64
}
</code></pre>
<p>We'll assume there's only one name per row.</p>
<h2 id="field-type" class="section-header"><a href="#field-type">6.2 Field Type</a></h2>
<p>Next we translate the Go Type from <code>ast.Field.Type</code> to <code>DartField</code>: <a href="https://github.com/lupyuen/mynewt-newtmgr/blob/ast/dart/convert.go#L241-L263"><code>dart/convert.go</code></a></p>
<pre><code class="language-go">  // Set the field type
  dartField.GoType = fmt.Sprintf(&quot;%v&quot;, astField.Type) // e.g. &quot;uint32&quot;
</code></pre>
<p>This works for simple Go Types like <code>uint32</code>. But the code above converts array types like <code>[]byte</code> to something weird like...</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
  <span class="kw-2">&amp;</span>{<span class="number">181</span> <span class="op">&lt;</span><span class="ident">nil</span><span class="op">&gt;</span> <span class="ident">byte</span>}</pre></div>
<p>We fix this by rewriting anything that matches <code>&amp;{...byte}</code> to <code>[]byte</code>...</p>
<pre><code class="language-go">  // Handle converted Go Type &quot;&amp;{181 &lt;nil&gt; byte}&quot; as &quot;[]byte&quot;
  if strings.HasPrefix(dartField.GoType, &quot;&amp;{&quot;) 
    &amp;&amp; strings.HasSuffix(dartField.GoType, &quot; byte}&quot;) {
    dartField.GoType = &quot;[]byte&quot;
  }
</code></pre>
<p>Remember the function <code>convertType()</code> we have created in the last section?</p>
<p>Here's how we call <code>convertType()</code> to convert the Go Type to Dart and CBOR Types...</p>
<pre><code class="language-go">  // Convert the Go Type (like &quot;uint32&quot;) to Dart and CBOR (&quot;int&quot; and &quot;Int&quot;)
  dartField.DartType, dartField.CborType = convertType(dartField.GoType)
</code></pre>
<p>This sets the Dart Type and CBOR Type in <code>DartField</code>.</p>
<p><img src="https://lupyuen.github.io/images/ast-go4.png" alt="Go Struct Field Tag in ast.Field" /></p>
<h2 id="field-tag" class="section-header"><a href="#field-tag">6.3 Field Tag</a></h2>
<p>Finally we extract the CBOR Name from <code>ast.Field.Tag</code> and copy to <code>DartField</code>. But first let's understand what's inside <code>Tag</code>...</p>
<p>In the Go code that we're converting, we use the <a href="https://godoc.org/github.com/ugorji/go/codec"><code>codec</code> library</a> to encode our Go Structs to CBOR. <code>codec</code> uses Field Tags like so...</p>
<pre><code class="language-go">struct {
  Len uint32 `codec:&quot;len&quot;`
</code></pre>
<p>This tells <code>codec</code> to encode the field <code>Len</code> using the CBOR field name <code>len</code>. </p>
<p>So when we look at the CBOR output, we will see the field name encoded as <code>len</code> instead of <code>Len</code>.</p>
<p><code>codec</code> Field Tags can have options...</p>
<pre><code class="language-go">struct {
  Len uint32 `codec:&quot;len,omitempty&quot;`
</code></pre>
<p>This tells <code>codec</code> to skip the encoding of this field if it's empty.</p>
<p>Here's the code in our converter that takes a Field Tag like <code>codec:&quot;len,omitempty&quot;</code> and extracts the CBOR field name <code>len</code>: <a href="https://github.com/lupyuen/mynewt-newtmgr/blob/ast/dart/convert.go#L241-L263"><code>dart/convert.go</code></a></p>
<pre><code class="language-go">  // Convert a Field Tag like `codec:&quot;len,omitempty&quot;`. CborName will be set to &quot;len&quot;.
  if astField.Tag != nil {
    dartField.CborName = strings.Split(astField.Tag.Value, &quot;,&quot;)[0]
    dartField.CborName = strings.Replace(dartField.CborName, &quot;codec:&quot;, &quot;&quot;, 1)
    dartField.CborName = strings.Replace(dartField.CborName, `&quot;`, &quot;&quot;, 2)
    dartField.CborName = strings.Replace(dartField.CborName, &quot;`&quot;, &quot;&quot;, 2)
  }
</code></pre>
<p>And we're done! After converting the Go Struct Field, we return the converted <code>DartField</code>...</p>
<pre><code class="language-go">// Convert a Go Struct Field astField to Dart
func convertField(fileset *token.FileSet, astField *ast.Field) DartField {
  ...
  // Return the convert DartField
  return dartField
}
</code></pre>
<p>That's how we auto convert a Go Struct Field to Dart with <code>convertField()</code>!</p>
<h1 id="auto-convert-go-struct-to-dart" class="section-header"><a href="#auto-convert-go-struct-to-dart">7 Auto Convert Go Struct to Dart</a></h1>
<p>Now that we have <code>convertField()</code> to convert a single field of a Go Struct, let's convert an entire Go Struct...</p>
<p><img src="https://lupyuen.github.io/images/ast-go5.png" alt="Go Struct encoded by ast library" /></p>
<p>TODO</p>
<p>Here is the code that converts a Go Struct to Dart: <a href="https://github.com/lupyuen/mynewt-newtmgr/blob/ast/dart/convert.go"><code>dart/convert.go</code></a></p>
<pre><code class="language-go">// Convert Go Struct to Dart
func convertStruct(fileset *token.FileSet, decl *ast.GenDecl) {
  // ast.Print(fileset, decl)
  switch decl.Tok.String() {
  case &quot;type&quot;:
    // Convert a type declaration
    for _, spec := range decl.Specs {
</code></pre>
<pre><code class="language-go">      switch spec := spec.(type) {
      case *ast.TypeSpec:
        // Get the struct name and output the Dart class
        typeName := spec.Name.Name // &quot;NmpHdr&quot;
        fmt.Printf(&quot;class %s &quot;, typeName)

        // If this is a request message struct...
        if strings.HasSuffix(typeName, &quot;Req&quot;) {
          // Add the Dart mixin and interface classes
          fmt.Println(&quot;&quot;)
          fmt.Println(&quot;  with NmpBase       //  Get and set SMP Message Header&quot;)
          fmt.Println(&quot;  implements NmpReq  //  SMP Request Message&quot;)
        }
        fmt.Println(&quot;{&quot;)
</code></pre>
<pre><code class="language-go">        switch structType := spec.Type.(type) {
        case *ast.StructType: // &quot;struct {&quot;
          // Convert the struct fields
          fields := structType.Fields.List
          convertFields(fileset, fields)
          fmt.Println(&quot;&quot;)

          // If this is a request message struct...
          if strings.HasSuffix(typeName, &quot;Req&quot;) {
            fmt.Println(&quot;  NmpMsg Msg() { return MsgFromReq(this); }\n&quot;)
            // Generate CBOR encoder
            generateCborEncoder(fileset, fields)
          }
</code></pre>
<p>Code conversion is fuzzy and somewhat unreliable, so we always put checks to ensure that we are interpreting the code correctly...</p>
<pre><code class="language-go">        default:
          fmt.Println(&quot;*** Unknown Spec Type:&quot;)
          ast.Print(fileset, spec.Type)
        }

      default:
        fmt.Println(&quot;*** Unknown Spec:&quot;)
        ast.Print(fileset, spec)
      }
    }
    fmt.Println(&quot;}\n&quot;)

  default:
    fmt.Println(&quot;*** Unknown Tok:&quot;)
    ast.Print(fileset, decl.Tok)
  }
}
</code></pre>
<pre><code class="language-go">// Convert Go Struct Fields to Dart
func convertFields(fileset *token.FileSet, astFields []*ast.Field) {
  for _, field := range astFields {
    // ast.Print(fileset, field)
    dartField := convertField(fileset, field)
    if dartField.Name != &quot;&quot; {
      fmt.Printf(&quot;  %s %s;\t//  %s: %s\n&quot;, dartField.DartType, dartField.Name, dartField.CborName, dartField.GoType)
    }
  }
}
</code></pre>
<p><a href="https://github.com/lupyuen/mynewt-newtmgr/blob/master/nmxact/nmp/image.go"><code>nmxact/nmp/image.go</code></a></p>
<pre><code class="language-go">//  Convert From Go...
//  Go Struct
type ImageUploadReq struct {
  NmpBase  `codec:&quot;-&quot;`
  ImageNum uint8  `codec:&quot;image&quot;`
  Off      uint32 `codec:&quot;off&quot;`
  Len      uint32 `codec:&quot;len,omitempty&quot;`
  DataSha  []byte `codec:&quot;sha,omitempty&quot;`
  Upgrade  bool   `codec:&quot;upgrade,omitempty&quot;`
  Data     []byte `codec:&quot;data&quot;`
}
</code></pre>
<p><a href="https://github.com/lupyuen/mynewt-newtmgr/blob/ast/dart/nmp/image.dart"><code>dart/nmp/image.dart</code></a></p>
<pre><code class="language-dart">//  Converted To Dart...
//  Converted Dart Class
class ImageUploadReq 
  with NmpBase       //  Get and set SMP Message Header
  implements NmpReq  //  SMP Request Message
{
  int ImageNum; //  image: uint8
  int Off;      //  off: uint32
  int Len;      //  len: uint32
  typed.Uint8Buffer DataSha;  //  sha: []byte
  bool Upgrade;               //  upgrade: bool
  typed.Uint8Buffer Data;     //  data: []byte

  NmpMsg Msg() { return MsgFromReq(this); }

  /// Encode the SMP Request fields to CBOR
  void Encode(cbor.MapBuilder builder) {
    //  ...Omitted...
  }
}
</code></pre>
<h1 id="auto-generate-cbor-encoder" class="section-header"><a href="#auto-generate-cbor-encoder">8 Auto Generate CBOR Encoder</a></h1>
<p>TODO</p>
<p><a href="https://github.com/lupyuen/mynewt-newtmgr/blob/master/nmxact/nmp/image.go"><code>nmxact/nmp/image.go</code></a></p>
<pre><code class="language-go">//  Convert From Go...
//  Go Struct
type ImageUploadReq struct {
  NmpBase  `codec:&quot;-&quot;`
  ImageNum uint8  `codec:&quot;image&quot;`
  Off      uint32 `codec:&quot;off&quot;`
  Len      uint32 `codec:&quot;len,omitempty&quot;`
  DataSha  []byte `codec:&quot;sha,omitempty&quot;`
  Upgrade  bool   `codec:&quot;upgrade,omitempty&quot;`
  Data     []byte `codec:&quot;data&quot;`
}
</code></pre>
<p><a href="https://github.com/lupyuen/mynewt-newtmgr/blob/ast/dart/nmp/image.dart"><code>dart/nmp/image.dart</code></a></p>
<pre><code class="language-dart">//  Converted To Dart...
//  Converted Dart Class
class ImageUploadReq 
  with NmpBase       //  Get and set SMP Message Header
  implements NmpReq  //  SMP Request Message
{
  ...
  /// Encode the SMP Request fields to CBOR
  void Encode(cbor.MapBuilder builder) {
    builder.writeString(&quot;image&quot;);
    builder.writeInt(ImageNum); // uint8
    builder.writeString(&quot;off&quot;);
    builder.writeInt(Off);      // uint32
    builder.writeString(&quot;len&quot;);
    builder.writeInt(Len);      // uint32
    builder.writeString(&quot;sha&quot;);
    builder.writeArray(DataSha);// []byte
    builder.writeString(&quot;upgrade&quot;);
    builder.writeBool(Upgrade); // bool
    builder.writeString(&quot;data&quot;);
    builder.writeArray(Data);   // []byte
  }
}
</code></pre>
<p>Here is the code that generates the CBOR Encoder for a Go Struct: <a href="https://github.com/lupyuen/mynewt-newtmgr/blob/ast/dart/convert.go"><code>dart/convert.go</code></a></p>
<pre><code class="language-go">// Generate the Dart CBOR Encoder function for the Go Struct Fields
func generateCborEncoder(fileset *token.FileSet, astFields []*ast.Field) {
  fmt.Println(&quot;  /// Encode the SMP Request fields to CBOR&quot;)
  fmt.Println(&quot;  void Encode(cbor.MapBuilder builder) {&quot;)
  for _, field := range astFields {
    // ast.Print(fileset, field)
    dartField := convertField(fileset, field)
    if dartField.CborName != &quot;-&quot; { // Fields tagged `codec:&quot;-&quot;` will not be ended
      // Encode the string key
      fmt.Printf(&quot;    builder.writeString(\&quot;%s\&quot;);\n&quot;, dartField.CborName)
      // Encode the value
      fmt.Printf(&quot;    builder.write%s(%s);\t// %s\n&quot;, dartField.CborType, dartField.Name, dartField.GoType)
    }
  }
  fmt.Println(&quot;  }&quot;)
}
</code></pre>
<h1 id="auto-convert-go-function-to-dart" class="section-header"><a href="#auto-convert-go-function-to-dart">9 Auto Convert Go Function to Dart</a></h1>
<p>TODO</p>
<p><a href="https://github.com/lupyuen/mynewt-newtmgr/blob/master/nmxact/nmp/image.go"><code>nmxact/nmp/image.go</code></a></p>
<pre><code class="language-go">//  Convert From Go...
//  Go Function
func NewImageUploadReq() *ImageUploadReq {
  r := &amp;ImageUploadReq{}
  fillNmpReq(r, NMP_OP_WRITE, NMP_GROUP_IMAGE, NMP_ID_IMAGE_UPLOAD)
  return r
}
</code></pre>
<p><a href="https://github.com/lupyuen/mynewt-newtmgr/blob/ast/dart/nmp/image.dart"><code>dart/nmp/image.dart</code></a></p>
<pre><code class="language-dart">//  Converted To Dart...
//  Converted Dart Function
ImageUploadReq NewImageUploadReq() {
  var r = ImageUploadReq();
  fillNmpReq(r, NMP_OP_WRITE, NMP_GROUP_IMAGE, NMP_ID_IMAGE_UPLOAD);
  return r;
}
</code></pre>
<p>Here is the code that converts a Go function to Dart: <a href="https://github.com/lupyuen/mynewt-newtmgr/blob/ast/dart/convert.go"><code>dart/convert.go</code></a></p>
<pre><code class="language-go">// Convert Go Function to Dart
func convertFunction(fileset *token.FileSet, decl *ast.FuncDecl) {
  // ast.Print(fileset, decl)
  name := decl.Name                                               // Function Name: &quot;NewImageUploadReq&quot;
  returnType := fmt.Sprintf(&quot;%v&quot;, decl.Type.Results.List[0].Type) // Return Type: &quot;&amp;{40 ImageUploadReq}&quot;

  // Convert the return type &quot;&amp;{40 ImageUploadReq}&quot; to &quot;ImageUploadReq&quot;
  if strings.HasPrefix(returnType, &quot;&amp;{&quot;) &amp;&amp; strings.HasSuffix(returnType, &quot;}&quot;) {
    returnType = strings.Split(returnType, &quot; &quot;)[1]
    returnType = strings.Replace(returnType, &quot;}&quot;, &quot;&quot;, 1)
  }
  // TODO: Convert function parameters

  // Output function declaration
  fmt.Printf(&quot;%s %s() {\n&quot;, returnType, name)

  // Convert the statements in the body
  body := decl.Body.List
  for _, stmt := range body {
    // ast.Print(fileset, stmt)
    // Convert the statement to a string
    var buf bytes.Buffer
    if err := format.Node(&amp;buf, fileset, stmt); err != nil {
      panic(err)
    }
    dartStmt := fmt.Sprintf(&quot;%s&quot;, buf.Bytes()) // &quot;r := &amp;ImageUploadReq{}&quot;

    // Convert specific kinds of statements
    switch stmt.(type) {
    case *ast.AssignStmt:
      // For Assignment Statement &quot;r := &amp;ImageUploadReq{}&quot;, rewrite to &quot;var r = ImageUploadReq()&quot;
      dartStmt = strings.Replace(dartStmt, &quot;:=&quot;, &quot;=&quot;, 1)
      dartStmt = strings.Replace(dartStmt, &quot;&amp;&quot;, &quot;&quot;, 1)
      dartStmt = strings.Replace(dartStmt, &quot;{}&quot;, &quot;()&quot;, 1)
      dartStmt = &quot;var &quot; + dartStmt
    }

    // Terminate every statement with semicolon
    fmt.Printf(&quot;  %s;\n&quot;, dartStmt)
  }
  // End of function
  fmt.Println(&quot;}\n&quot;)
}
</code></pre>
<h1 id="test-auto-conversion" class="section-header"><a href="#test-auto-conversion">10 Test Auto Conversion</a></h1>
<p>TODO</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="op">&gt;</span> <span class="ident">Executing</span> <span class="ident">task</span>: <span class="op">/</span><span class="ident">usr</span><span class="op">/</span><span class="ident">local</span><span class="op">/</span><span class="ident">go</span><span class="op">/</span><span class="ident">bin</span><span class="op">/</span><span class="ident">go</span> <span class="ident">run</span> <span class="ident">dart</span><span class="op">/</span><span class="ident">convert</span>.<span class="ident">go</span> <span class="op">&lt;</span></pre></div>
<pre><code class="language-go">//  Go Code...

package main

type ImageUploadReq struct {
  NmpBase  `codec:&quot;-&quot;`
  ImageNum uint8  `codec:&quot;image&quot;`
  Off      uint32 `codec:&quot;off&quot;`
  Len      uint32 `codec:&quot;len,omitempty&quot;`
  DataSha  []byte `codec:&quot;sha,omitempty&quot;`
  Upgrade  bool   `codec:&quot;upgrade,omitempty&quot;`
  Data     []byte `codec:&quot;data&quot;`
}

func NewImageUploadReq() *ImageUploadReq {
  r := &amp;ImageUploadReq{}
  fillNmpReq(r, NMP_OP_WRITE, NMP_GROUP_IMAGE, NMP_ID_IMAGE_UPLOAD)
  return r
}
</code></pre>
<pre><code class="language-dart">//  Converted To Dart...

class ImageUploadReq 
  with NmpBase       //  Get and set SMP Message Header
  implements NmpReq  //  SMP Request Message
{
  int ImageNum; //  image: uint8
  int Off;      //  off: uint32
  int Len;      //  len: uint32
  typed.Uint8Buffer DataSha;    //  sha: []byte
  bool Upgrade; //  upgrade: bool
  typed.Uint8Buffer Data;       //  data: []byte

  NmpMsg Msg() { return MsgFromReq(this); }

  /// Encode the SMP Request fields to CBOR
  void Encode(cbor.MapBuilder builder) {
    builder.writeString(&quot;image&quot;);
    builder.writeInt(ImageNum); // uint8
    builder.writeString(&quot;off&quot;);
    builder.writeInt(Off);      // uint32
    builder.writeString(&quot;len&quot;);
    builder.writeInt(Len);      // uint32
    builder.writeString(&quot;sha&quot;);
    builder.writeArray(DataSha);        // []byte
    builder.writeString(&quot;upgrade&quot;);
    builder.writeBool(Upgrade); // bool
    builder.writeString(&quot;data&quot;);
    builder.writeArray(Data);   // []byte
  }
}

ImageUploadReq NewImageUploadReq() {
  var r = ImageUploadReq();
  fillNmpReq(r, NMP_OP_WRITE, NMP_GROUP_IMAGE, NMP_ID_IMAGE_UPLOAD);
  return r;
}
</code></pre>
<h1 id="why-auto-convert-go-to-dart" class="section-header"><a href="#why-auto-convert-go-to-dart">11 Why Auto Convert Go to Dart?</a></h1>
<p>TODO</p>
<p>Both languages were created at Google, yet so different</p>
<p>Minimise errors in conversion</p>
<p>Huge volume of code</p>
<p>Consistency of conversion</p>
<p>Easy cross reference</p>
<h1 id="whats-next" class="section-header"><a href="#whats-next">12 What's Next</a></h1>
<p>TODO</p>
<p>The code in this article is part of the upcoming open source <a href="https://github.com/lupyuen/pinetime-companion"><strong>PineTime Companion App</strong></a> for Android and iOS. So that we can update the firmware on our PineTime Smart Watches wirelessly, sync the date and time, show notifications from our phone, chart our heart rate, ... Maybe even control our smart home gadgets! </p>
<p>We'll be doing lots more coding...</p>
<ol>
<li>
<p><strong>Handle Other PineTime Commands:</strong> Update firmware, sync date and time, show mobile notifications, control smart home gadgets (via IFTTT and MQTT), ...</p>
<p>We shall do this by taking the <a href="https://github.com/apache/mynewt-newtmgr">Newt Manager</a> code in Go and converting it to Flutter and Dart, as explained here...</p>
<p><em><a href="https://lupyuen.github.io/pinetime-rust-mynewt/articles/companion">&quot;Convert Go to Flutter and Dart for PineTime Companion App&quot;</a></em></p>
</li>
<li>
<p><strong>Companion App for Linux Phones (like PinePhone):</strong> We shall take the <a href="https://github.com/apache/mynewt-newtmgr">Newt Manager</a> code in Go and wrap it into a GTK3 app, using the <a href="https://github.com/gotk3/gotk3"><code>gotk3</code> library</a>...</p>
<p><em><a href="https://lupyuen.github.io/pinetime-rust-mynewt/articles/gotk3">&quot;Your First GTK App with Go and VSCodium&quot;</a></em></p>
</li>
<li>
<p><strong>PineTime Firmware Support:</strong> Today our PineTime Companion App talks to Mynewt and Zephyr operating systems on PineTime. We hope to implement the same Bluetooth LE protocol (Simple Management Protocol) on other operating systems, so that they may also enjoy wireless firmware updates...</p>
<p><em><a href="https://lupyuen.github.io/pinetime-rust-mynewt/articles/dfu">&quot;Firmware Update over Bluetooth Low Energy on PineTime Smart Watch&quot;</a></em></p>
</li>
</ol>
<p><em>Why are we maintaining two code bases: Flutter (for Android and iOS) and Go (for Linux phones)?</em></p>
<p>Because Flutter is probably the best way to build mobile apps... But it's not officially supported for Linux phones.  The <code>flutter_blue</code> plugin doesn't support Linux either.</p>
<p>So we need to stick with Go for Linux phones.</p>
<p>We're now exploring <a href="https://github.com/go-flutter-desktop/go-flutter"><strong><code>go-flutter</code></strong></a> for porting the Flutter App to Linux. And recode <code>flutter_blue</code> via FFI to a Linux Bluetooth LE library (in Go or C).</p>
<p><em>(Maybe someday when Flutter is officially supported on Linux phones, we can scrap the Go version!)</em></p>
<p>If you're keen to help out with the PineTime Companion App (or anything else in PineTime), <strong>come chat with the PineTime FOSS Community (and me) in the PineTime Chatroom!</strong></p>
<p><a href="https://wiki.pine64.org/index.php/PineTime#Community">PineTime Chatroom on Matrix / Discord / Telegram / IRC</a></p>
<h1 id="further-reading" class="section-header"><a href="#further-reading">13 Further Reading</a></h1>
<p><em><a href="https://lupyuen.github.io/pinetime-rust-mynewt/articles/bloc">&quot;Flutter State Management with Bloc for PineTime Companion App&quot;</a></em></p>
<p><em><a href="https://lupyuen.github.io/pinetime-rust-mynewt/articles/companion">&quot;Convert Go to Flutter and Dart for PineTime Companion App&quot;</a></em></p>
<p><em><a href="https://lupyuen.github.io/pinetime-rust-mynewt/articles/flutter">&quot;Your First Bluetooth Low Energy App with Flutter&quot;</a></em></p>
<p><em><a href="https://lupyuen.github.io/pinetime-rust-mynewt/articles/gotk3">&quot;Your First GTK App with Go and VSCodium&quot;</a></em></p>
<p><em><a href="https://lupyuen.github.io/pinetime-rust-mynewt/articles/mcuboot">&quot;MCUBoot Bootloader for PineTime Smart Watch (nRF52)&quot;</a></em></p>
<p><em><a href="https://lupyuen.github.io/pinetime-rust-mynewt/articles/dfu">&quot;Firmware Update over Bluetooth Low Energy on PineTime Smart Watch&quot;</a></em></p>
<p><em><a href="https://lupyuen.github.io/pinetime-rust-mynewt/articles/dfutest">&quot;Wireless Firmware Update In Action on PineTime Smart Watch (nRF52)&quot;</a></em></p>
<p><a href="https://github.com/lupyuen/pinetime-rust-mynewt/blob/master/README.md">Check out the other PineTime articles</a></p>
<p><a href="https://lupyuen.github.io/rss.xml">RSS Feed</a></p>

    
</body>
</html>
